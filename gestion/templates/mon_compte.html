{% extends "base.html" %}

{% block title %}Documents - M√©diath√®que{% endblock %}

{% block content %}

<h1>Mon compte</h1>

<p><strong>Nom :</strong> {{ profil.user.first_name }} {{ profil.user.last_name }}</p>
<p><strong>Email :</strong> {{ profil.user.email }}</p>
<h3>Co√ªt de l‚Äôabonnement :</h3>
<p>
    {% if profil.est_gratuit %}
        Votre abonnement est gratuit.
    {% else %}
        tarif normal : 22 ‚Ç¨ par an ou tarif r√©duit : 10,50 ‚Ç¨ par mois
    {% endif %}
</p>

<p><strong>Date d‚Äôabonnement :</strong> {{ profil.date_abonnement }}</p>

<p><strong>Date de renouvellement :</strong> {{ date_renouvellement }}</p>
{% if profil.abonnement_valide %}
    <p style="color: green;"><strong>Abonnement :</strong> √Ä jour </p>
{% else %}
    <p style="color: red;"><strong>Abonnement :</strong> Non valide </p>
{% endif %}

{% if abonnement_en_retard %}
    <p style="color: red;"><strong>Rappel :</strong> Une lettre de rappel a √©t√© envoy√©e </p>
{% elif profil.lettre_envoyee %}
    <p style="color: orange;"><strong>Rappel :</strong> Lettre de rappel envoy√©e</p>
{% else %}
    <p><strong>Rappel :</strong> Aucun rappel envoy√©</p>
{% endif %}

{% if emprunts %}
    <table>
        <tr>
            <th>Document</th>
            <th>Date d‚Äôemprunt</th>
            <th>Date retour pr√©vue</th>
            <th>Date retour r√©elle</th>
            <th>Statut</th>
        </tr>
        {% for emprunt in emprunts %}
        <tr>
            <td>{{ emprunt.document.titre }}</td>
            <td>{{ emprunt.date_emprunt }}</td>
            <td>{{ emprunt.date_retour_prevue }}</td>
            <td>{{ emprunt.date_retour_reelle|default:"‚Äî" }}</td>
            <td>
                {% if emprunt.date_retour_reelle %}
                    ‚úÖ Rendu
                {% elif emprunt.date_retour_prevue < today %}
                    üî¥ En retard
                {% else %}
                    ‚è≥ En cours
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </table>
{% else %}
    <p>Vous n‚Äôavez pas encore emprunt√© de document.</p>
{% endif %}


{% endblock %}
